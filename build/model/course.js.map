{"version":3,"sources":["../../src/model/course.js"],"names":["db","require","module","exports","createCourse","getCourseById","getAllCourses","deleteCourseById","patchCourseById","getAllCoursesByDepartDeg","data","insert","returning","id","where","first","join","department_id","degree_id","del","update"],"mappings":";;AAAA,IAAMA,EAAE,GAAGC,OAAO,CAAC,cAAD,CAAlB;;AAEAC,MAAM,CAACC,OAAP,GAAiB;AACfC,EAAAA,YAAY,EAAZA,YADe;AAEfC,EAAAA,aAAa,EAAbA,aAFe;AAGfC,EAAAA,aAAa,EAAbA,aAHe;AAIfC,EAAAA,gBAAgB,EAAhBA,gBAJe;AAKfC,EAAAA,eAAe,EAAfA,eALe;AAMfC,EAAAA,wBAAwB,EAAxBA;AANe,CAAjB,C,CASA;;AACA,SAASL,YAAT,CAAsBM,IAAtB,EAA4B;AAC1B,SAAOV,EAAE,CAAC,SAAD,CAAF,CAAcW,MAAd,CAAqBD,IAArB,EAA2BE,SAA3B,CAAqC,GAArC,CAAP;AACD;;AACD,SAASP,aAAT,CAAuBQ,EAAvB,EAA2B;AACzB,SAAOb,EAAE,CAAC,SAAD,CAAF,CAAcc,KAAd,CAAoB;AAAED,IAAAA,EAAE,EAAFA;AAAF,GAApB,EAA4BE,KAA5B,EAAP;AACD;;AACD,SAAST,aAAT,GAAyB;AACvB,SAAON,EAAE,CAAC,SAAD,CAAF,CACJgB,IADI,CACC,aADD,EACgB,gBADhB,EACkC,GADlC,EACuC,uBADvC,EAEJA,IAFI,CAEC,WAFD,EAEc,cAFd,EAE8B,GAF9B,EAEmC,wBAFnC,EAGJA,IAHI,CAGC,SAHD,EAGY,YAHZ,EAG0B,GAH1B,EAG+B,qBAH/B,CAAP;AAID;;AACD,SAASP,wBAAT,OAAgE;AAAA,MAA5BQ,aAA4B,QAA5BA,aAA4B;AAAA,MAAbC,SAAa,QAAbA,SAAa;AAC9D,SAAOlB,EAAE,CAAC,SAAD,CAAF,CACJc,KADI,CACE;AAAEG,IAAAA,aAAa,EAAEA,aAAjB;AAAgCC,IAAAA,SAAS,EAAEA;AAA3C,GADF,EAEJF,IAFI,CAEC,aAFD,EAEgB,gBAFhB,EAEkC,GAFlC,EAEuC,uBAFvC,EAGJA,IAHI,CAGC,WAHD,EAGc,cAHd,EAG8B,GAH9B,EAGmC,wBAHnC,EAIJA,IAJI,CAIC,SAJD,EAIY,YAJZ,EAI0B,GAJ1B,EAI+B,qBAJ/B,CAAP;AAKD;;AACD,SAAST,gBAAT,CAA0BM,EAA1B,EAA8B;AAC5B,SAAOb,EAAE,CAAC,SAAD,CAAF,CAAcc,KAAd,CAAoB;AAAED,IAAAA,EAAE,EAAFA;AAAF,GAApB,EAA4BM,GAA5B,EAAP;AACD;;AACD,SAASX,eAAT,CAAyBK,EAAzB,EAA6BH,IAA7B,EAAmC;AACjC,SAAOV,EAAE,CAAC,SAAD,CAAF,CAAcc,KAAd,CAAoB;AAAED,IAAAA,EAAE,EAAFA;AAAF,GAApB,EAA4BO,MAA5B,CAAmCV,IAAnC,EAAyCE,SAAzC,CAAmD,GAAnD,CAAP;AACD","sourcesContent":["const db = require('../db/config');\n\nmodule.exports = {\n  createCourse,\n  getCourseById,\n  getAllCourses,\n  deleteCourseById,\n  patchCourseById,\n  getAllCoursesByDepartDeg,\n};\n\n// COURSE\nfunction createCourse(data) {\n  return db('courses').insert(data).returning('*');\n}\nfunction getCourseById(id) {\n  return db('courses').where({ id }).first();\n}\nfunction getAllCourses() {\n  return db('courses')\n    .join('departments', 'departments.id', '=', 'courses.department_id')\n    .join('faculties', 'faculties.id', '=', 'departments.faculty_id')\n    .join('schools', 'schools.id', '=', 'faculties.school_id');\n}\nfunction getAllCoursesByDepartDeg({ department_id, degree_id }) {\n  return db('courses')\n    .where({ department_id: department_id, degree_id: degree_id })\n    .join('departments', 'departments.id', '=', 'courses.department_id')\n    .join('faculties', 'faculties.id', '=', 'departments.faculty_id')\n    .join('schools', 'schools.id', '=', 'faculties.school_id');\n}\nfunction deleteCourseById(id) {\n  return db('courses').where({ id }).del();\n}\nfunction patchCourseById(id, data) {\n  return db('courses').where({ id }).update(data).returning('*');\n}\n"],"file":"course.js"}