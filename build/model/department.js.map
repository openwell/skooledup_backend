{"version":3,"sources":["../../src/model/department.js"],"names":["db","require","createDepartment","data","insert","returning","getDepartmentById","id","where","first","getAllDepartments","join","select","getAllDepartmentsByFacultyId","deleteDepartmentById","del","patchDepartmentById","update"],"mappings":";;;;;;;;;;;;AAAA,IAAMA,EAAE,GAAGC,OAAO,CAAC,cAAD,CAAlB,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AACO,SAASC,gBAAT,CAA0BC,IAA1B,EAAgC;AACrC,SAAOH,EAAE,CAAC,aAAD,CAAF,CAAkBI,MAAlB,CAAyBD,IAAzB,EAA+BE,SAA/B,CAAyC,GAAzC,CAAP;AACD;;AACM,SAASC,iBAAT,CAA2BC,EAA3B,EAA+B;AACpC,SAAOP,EAAE,CAAC,aAAD,CAAF,CAAkBQ,KAAlB,CAAwB;AAAED,IAAAA,EAAE,EAAFA;AAAF,GAAxB,EAAgCE,KAAhC,EAAP;AACD;;AACM,SAASC,iBAAT,GAA6B;AAClC,SAAOV,EAAE,CAAC,aAAD,CAAF,CACJW,IADI,CACC,WADD,EACc,cADd,EAC8B,GAD9B,EACmC,wBADnC,EAEJA,IAFI,CAEC,SAFD,EAEY,YAFZ,EAE0B,GAF1B,EAE+B,qBAF/B,EAGJC,MAHI,CAIH,sBAJG,EAKH,2CALG,EAMH,mCANG,EAOH,+BAPG,CAAP;AASD;;AACM,SAASC,4BAAT,CAAsCN,EAAtC,EAA0C;AAC/C,SAAOP,EAAE,CAAC,aAAD,CAAF,CACJQ,KADI,CACE,YADF,EACgBD,EADhB,EAEJI,IAFI,CAEC,WAFD,EAEc,cAFd,EAE8B,GAF9B,EAEmC,wBAFnC,EAGJA,IAHI,CAGC,SAHD,EAGY,YAHZ,EAG0B,GAH1B,EAG+B,qBAH/B,EAIJC,MAJI,CAKH,sBALG,EAMH,2CANG,EAOH,mCAPG,EAQH,+BARG,CAAP;AAUD;;AACM,SAASE,oBAAT,CAA8BP,EAA9B,EAAkC;AACvC,SAAOP,EAAE,CAAC,aAAD,CAAF,CAAkBQ,KAAlB,CAAwB;AAAED,IAAAA,EAAE,EAAFA;AAAF,GAAxB,EAAgCQ,GAAhC,EAAP;AACD;;AACM,SAASC,mBAAT,CAA6BT,EAA7B,EAAiCJ,IAAjC,EAAuC;AAC5C,SAAOH,EAAE,CAAC,aAAD,CAAF,CAAkBQ,KAAlB,CAAwB;AAAED,IAAAA,EAAE,EAAFA;AAAF,GAAxB,EAAgCU,MAAhC,CAAuCd,IAAvC,EAA6CE,SAA7C,CAAuD,GAAvD,CAAP;AACD","sourcesContent":["const db = require('../db/config');\n\n// module.exports = {\n//   createDepartment,\n//   getDepartmentById,\n//   getAllDepartments,\n//   deleteDepartmentById,\n//   patchDepartmentById,\n//   getAllDepartmentsByFacultyId,\n// };\n\n// DEPARTMENT\nexport function createDepartment(data) {\n  return db('departments').insert(data).returning('*');\n}\nexport function getDepartmentById(id) {\n  return db('departments').where({ id }).first();\n}\nexport function getAllDepartments() {\n  return db('departments')\n    .join('faculties', 'faculties.id', '=', 'departments.faculty_id')\n    .join('schools', 'schools.id', '=', 'faculties.school_id')\n    .select(\n      'departments.id as id',\n      'departments.department_name as department',\n      'faculties.faculty_name as faculty',\n      'schools.school_name as school'\n    );\n}\nexport function getAllDepartmentsByFacultyId(id) {\n  return db('departments')\n    .where('faculty_id', id)\n    .join('faculties', 'faculties.id', '=', 'departments.faculty_id')\n    .join('schools', 'schools.id', '=', 'faculties.school_id')\n    .select(\n      'departments.id as id',\n      'departments.department_name as department',\n      'faculties.faculty_name as faculty',\n      'schools.school_name as school'\n    );\n}\nexport function deleteDepartmentById(id) {\n  return db('departments').where({ id }).del();\n}\nexport function patchDepartmentById(id, data) {\n  return db('departments').where({ id }).update(data).returning('*');\n}\n"],"file":"department.js"}